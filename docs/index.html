<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Elma Project: Final Project</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Elma Project
   </div>
   <div id="projectbrief">An event loop manager for embedded systems</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Final Project </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>I have developed 2 projects:</p><ul>
<li><a href="https://github.com/mihirmodi29/vending-machine">Vending Machine</a></li>
<li><a href="https://github.com/mihirmodi29/ELMA_Switch_Rpi">ELMA_Switch_Rpi</a></li>
</ul>
<h1>ELMA_Switch_Rpi (ELMA Project)</h1>
<h2>Project Goals </h2>
<p>The goal of project is to implement a switching of light on and off using a UV sensor or switch button and Raspberry Pi. This project is extention of ELMA: <a href="https://github.com/klavinslab/elma">https://github.com/klavinslab/elma</a>. I will extend the given example <a href="https://github.com/klavinslab/elma/blob/master/examples/toggle-switch.cc">https://github.com/klavinslab/elma/blob/master/examples/toggle-switch.cc</a> to Rapberry Pi.</p>
<h2>Project Success </h2>
<p>When the UV sensor senses an object it will turn the red led light on or when the user presses the button it will turn the red led light on. When there is no object around it will turn green led light on or when the user releases the button it will turn the green led light on.</p>
<h2>Resources </h2>
<ul>
<li>Rapberry Pi</li>
<li>LED's</li>
<li>Visual studio C++</li>
<li>UV Sensor</li>
<li>Switch Button</li>
<li>ELMA</li>
</ul>
<h2>Milestones </h2>
<ul>
<li>Setting up Raspberry pi 3. (3/12/2019)</li>
<li>Setting up ELMA into Raspberry pi 3. (3/14/2019)</li>
<li>Gathering sensors and LED's. (3/15/2019)</li>
<li>Prototype phase 1 and run initial code to ensure Rpi is setup. (3/18/2019)</li>
<li>Final setup and final code with sensor implementation. (3/20/2019)</li>
<li>Documentation and final submission. (3/22/2019)</li>
</ul>
<h1>Change of Plans</h1>
<ul>
<li>Setting up Raspberry pi 3. (3/12/2019)</li>
<li>Setting up ELMA into Raspberry pi 3. (3/13/2019)</li>
<li>Gathering sensors and LED's. (3/14/2019)</li>
<li>Prototype phase 1 and run initial code to ensure Rpi is setup. (3/15/2019)</li>
<li>Final setup and final code with led implementation. (3/16/2019)</li>
<li>Due to unavailibility of UV sensor developed another project <a href="https://github.com/mihirmodi29/vending-machine">Vending Machine</a></li>
<li>Implemented vending machine and refactoring elma-project (3/21/2019)</li>
<li>Documentation and final submission. (3/23/2019)</li>
</ul>
<h2>Progress Report (3/17/2019) </h2>
<ul>
<li>I have setup my Raspberry pi with Raspbian OS. I have also used ELMA as library (<a href="https://github.com/klavinslab/elma">https://github.com/klavinslab/elma</a>) into my project from an example (<a href="https://github.com/klavinslab/elma_project">https://github.com/klavinslab/elma_project</a>). I have also gathered UV sensor along with LED's and developed starter code to blink LED's on and off. Currently I can blink LED on/off using WiringPi library. Next step is to set UV sensor and change state of LED depending on UV sensor output.</li>
</ul>
<h2>Progress Report (3/23/2019) </h2>
<ul>
<li>Due to limitation of implementing UV sensor I implemented blinking of led in raspberry pi and vending machine impleemntation as another project.</li>
</ul>
<h1>Installation </h1>
<p>The source code for Elma <a href="https://github.com/klavinslab/elma">is on Github</a>.</p>
<p>First install required packages available through apt-get </p><pre class="fragment">sudo apt-get update
sudo apt-get install -y cmake
sudo apt-get install -y cppcheck
sudo apt-get install -y graphviz
sudo apt-get install -y doxygen
sudo apt-get install -y cmake
sudo apt-get install -y libssl-dev
</pre><p>Next, install Google Test </p><pre class="fragment">cd /usr/src
sudo git clone https://github.com/google/googletest.git
cd googletest
sudo mkdir install
cd install
sudo cmake ../
sudo make
sudo make install
</pre><p>Next, install the json library </p><pre class="fragment">sudo mkdir /usr/local/include/json
cd /usr/local/include/json
sudo curl -O -J -L https://github.com/nlohmann/json/releases/download/v3.5.0/json.hpp
sudo mv json.hpp json.h
</pre><p>Next, install httplib </p><pre class="fragment">cd /tmp
git clone https://github.com/klavins/cpp-httplib.git
sudo mkdir /usr/local/include/httplib
sudo mv /tmp/cpp-httplib/httplib.h /usr/local/include/httplib
</pre><p>Now you should be ready to install elma: </p><pre class="fragment">cd Desktop
mkdir Code
cd Code
git clone https://github.com/klavinslab/elma.git
cd elma
make
</pre><p>Note that the Makefile should detect if you are on a pi by using the command </p><pre class="fragment">uname -m
</pre><p> which on a pi 3 model B+ returns 'armv71'. If your pi is different, you might need to change the ifeq statments in <code>test/Makefile</code> and <code>examples/Makefile</code>.</p>
<p>If you would like to treat elma as a library, so you can link in other code, you should link to the relevant files in to the unversal system resources (usr) as follows: </p><div class="fragment"><div class="line">ln -s include /usr/local/include/elma</div><div class="line">ln -s lib/libelma.a /usr/local/lib/libelma.a</div></div><!-- fragment --><p> Then you can do </p><div class="fragment"><div class="line">{c++}</div><div class="line">#include &quot;/home/pi/Desktop/Code/elma/include/elma.h&quot; </div></div><!-- fragment --><p> in your code and use the <code>-lelma</code> flag while linking. See the <a href="https://github.com/klavinslab/elma_project">example elma project</a> for an example.</p>
<p>Now you should be ready to install ELMA_Switch_Rpi: </p><pre class="fragment">cd Desktop
cd Code
git clone https://github.com/mihirmodi29/ELMA_Switch_Rpi
cd ELMA_Switch_Rpi
make
</pre><h2>Architecture </h2>
<p>Connect LED as follow to pin 11:</p>
<div class="image">
<img src="image/blink1.jpg"/>
</div>
<h2>Execution </h2>
<p>To run the ELMA_Switch_Rpi, type </p><pre class="fragment">bin/toggle-switch
</pre><h2>Result </h2>
<div class="image">
<img src="image/result.PNG"/>
</div>
<h2>Acknowledgements </h2>
<p>I would like to thank Prof. Klavins for the awesome coursework material.</p>
<h2>References </h2>
<ul>
<li><a href="https://github.com/klavinslab/elma_project">https://github.com/klavinslab/elma_project</a></li>
<li><a href="https://github.com/klavins/ECEP520">https://github.com/klavins/ECEP520</a></li>
<li><a href="https://github.com/klavinslab/elma/blob/master/examples/toggle-switch.cc">https://github.com/klavinslab/elma/blob/master/examples/toggle-switch.cc</a></li>
<li><a href="http://wiringpi.com/examples/blink/">http://wiringpi.com/examples/blink/</a></li>
</ul>
<h1>License </h1>
<p>This software is open source and uses the MIT license. Details can be found <a href="https://github.com/mihirmodi29/ELMA_Switch_Rpi">here</a>. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Mar 23 2019 15:13:59 for My Elma Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
